<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰ä¸–ä»Šç”Ÿå¤§æ­ç§˜</title>
    <script 
src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin: auto;
        }
        .question {
            margin: 20px 0;
            font-size: 18px;
        }
        .options button {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .options button:hover {
            background: #0056b3;
        }
        #result, #long-test {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å‰ä¸–ä»Šç”Ÿå¤§æ­ç§˜</h1>
        <h2>å¤©èµ‹ï¼ŒèŒåœºï¼Œå©šå§»ä¸€ç«™æå®š</h2>
        <p>ç®€å•ã€å¿«é€Ÿã€ä¸æ¨¡æ£±ä¸¤å¯çš„é—®å·ï¼Œå‰–å¼€ä½ çš„çµé­‚ç»“æ„ä¸å…³ç³»ã€‚</p>
        <p>3-5 åˆ†é’Ÿå†…å‘ˆç°ä¸€è§ˆæ— ä½™ï¼</p>
<!-- â¬‡ï¸ çŸ­æ¿æµ‹è¯•ç»“æœ -->
<div id="result">
    <h2>ğŸ”® ä½ çš„çµé­‚ç»“æ„æ˜¯ï¼š</h2>
    <p id="user-id">ç”¨æˆ· IDï¼šæœªç”Ÿæˆ</p>
    <p id="test-date">æµ‹è¯•æ—¥æœŸï¼šæœªè®°å½•</p>
    <p id="result-text">ï¼ˆçµé­‚ç»“æ„åˆ†æå°†åœ¨æ­¤æ˜¾ç¤ºï¼‰</p>
    <button onclick="startLongTest()">ğŸ“œ ç»§ç»­æ·±å…¥æµ‹è¯•</button>
    <button onclick="generatePDF()">ğŸ“¥ ä¸‹è½½ PDF æŠ¥å‘Š</button>
</div>

        <!-- çŸ­æ¿é—®å· -->
        <div id="short-quiz">
    <p class="question" id="short-question-text"></p>
    <div class="options" id="short-options"></div>
</div>

<!-- âœ… çŸ­æ¿æµ‹è¯•ç»“æœ -->
<div id="short-result" style="display: none;">
    <h2>ğŸ”® ä½ çš„çµé­‚ç»“æ„</h2>
    <p id="user-id">ç”¨æˆ· IDï¼šæœªç”Ÿæˆ</p>
    <p id="test-date">æµ‹è¯•æ—¥æœŸï¼šæœªè®°å½•</p>
    <p id="soul-type">çµé­‚ç»“æ„ï¼šæœªå®šä¹‰</p>
    <p 
id="short-report-content">ä½ çš„çµé­‚ç»“æ„å†³å®šäº†ä½ çš„æ€ç»´æ–¹å¼ã€èŒä¸šå€¾å‘å’Œäººé™…å…³ç³»æ¨¡å¼â€¦â€¦ï¼ˆå®Œæ•´åˆ†æï¼‰</p>
    
    <!-- ğŸ¯ ç»§ç»­æ·±å…¥æµ‹è¯• -->
    <button onclick="startLongTest()">ğŸ“œ ç»§ç»­æ·±å…¥æµ‹è¯•</button>
    
    <!-- ğŸ“¥ ä¸‹è½½çŸ­æ¿ PDF æŒ‰é’® -->
    <button onclick="generatePDF('short')">ğŸ“¥ ä¸‹è½½çŸ­æ¿æŠ¥å‘Š</button>
</div>

<!-- âœ… é•¿æ¿é—®å· -->
<div id="long-test" style="display: none;">
    <h2>ğŸ“œ é•¿ç‰ˆæµ‹è¯•ï¼ˆ30 é¢˜ï¼‰</h2>
    <p class="question" id="long-question-text"></p>
    <div class="options" id="long-options"></div>
</div>

<!-- âœ… é•¿æ¿æµ‹è¯•ç»“æœï¼ˆé»˜è®¤éšè—ï¼Œç­‰ç”¨æˆ·åšå®Œé•¿æ¿æµ‹è¯•åæ˜¾ç¤ºï¼‰ -->
<div id="long-test-result" style="display: none;">
    <h2>ğŸ“Š é•¿æ¿æµ‹è¯•ç»“æœ</h2>
    <p id="user-id-long">ç”¨æˆ· IDï¼šæœªç”Ÿæˆ</p>
    <p id="test-date-long">æµ‹è¯•æ—¥æœŸï¼šæœªè®°å½•</p>
    <p id="soul-type-long">çµé­‚ç»“æ„ï¼šæœªå®šä¹‰</p>
    <p id="mbti-result">MBTI ç±»å‹ï¼šæœªå®šä¹‰</p>
    <p id="bigfive-result">Big Five åˆ†æï¼šæœªå®šä¹‰</p>
    <p id="career-recommendation">èŒä¸šå»ºè®®ï¼šæœªå®šä¹‰</p>

    <!-- ğŸ“¥ ä¸‹è½½é•¿æ¿ PDF æŒ‰é’® -->
    <button onclick="generatePDF('long')">ğŸ“¥ ä¸‹è½½é•¿æ¿æŠ¥å‘Š</button>
</div>

<p class="question" id="long-question-text"></p>
            <div class="options" id="long-options"></div>
            <button onclick="finishLongTest()" style="display: none;">ğŸ” 
æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š</button>
        </div>
        
        <!-- â¬‡ï¸ æ–°å¢é•¿æ¿ç»“æœï¼ˆé»˜è®¤éšè—ï¼Œç­‰ç”¨æˆ·åšå®Œé•¿æ¿æµ‹è¯•åæ˜¾ç¤ºï¼‰ -->
<div id="long-test-result" style="display: none;">
    <h2>ğŸ“Š é•¿æ¿æµ‹è¯•ç»“æœ</h2>
    <p id="mbti-result">MBTI ç±»å‹ï¼šæœªå®šä¹‰</p>
    <p id="bigfive-result">Big Five åˆ†æï¼šæœªå®šä¹‰</p>
    <p id="career-recommendation">èŒä¸šå»ºè®®ï¼šæœªå®šä¹‰</p>
    <button onclick="generatePDF()">ğŸ“¥ ä¸‹è½½ PDF æŠ¥å‘Š</button>
</div>

    </div>

<script>
    let shortAnswers = []; // å­˜å‚¨çŸ­æ¿é—®å·ç­”æ¡ˆ
    let longAnswers = [];  // å­˜å‚¨é•¿æ¿é—®å·ç­”æ¡ˆ
    let soulType = "";     // çµé­‚ç»“æ„ï¼ˆçŸ­æ¿ç¡®å®šåä¸å†æ›´æ”¹ï¼‰

    // çŸ­æ¿é—®å·é¢˜ç›®
    const shortQuestions = [
        "1. ä½ æ›´å–œæ¬¢ä»¥ä¸‹å“ªç§æ´»åŠ¨ï¼Ÿ",
        "2. ä½ æ›´å®¹æ˜“è¢«å“ªç§æƒ…ç»ªå½±å“ï¼Ÿ",
        "3. ä½ å–œæ¬¢ä»¥ä¸‹å“ªç§èŒä¸šï¼Ÿ",
        "4. ä½ æ›´å…³æ³¨ï¼Ÿ",
        "5. ä½ åœ¨ç¤¾äº¤åœºåˆæ›´åƒï¼Ÿ"
    ];
    const shortOptions = [
        ["ğŸ“– é˜…è¯» & æ€è€ƒ", "ğŸ’¬ ç¤¾äº¤ & äº¤æµ"],
        ["ğŸ§  ç†æ€§ï¼Œé€»è¾‘", "â¤ï¸ æƒ…æ„Ÿï¼Œç›´è§‰"],
        ["ğŸ”¬ ç§‘å­¦å®¶ / å·¥ç¨‹å¸ˆ", "ğŸ­ è‰ºæœ¯å®¶ / å…¬å…³"],
        ["ğŸ¯ ç›®æ ‡ & è®¡åˆ’", "ğŸŒ¿ ä½“éªŒ & æ„Ÿå—"],
        ["ğŸ‘€ è§‚å¯Ÿè€…", "ğŸ”¥ é¢†å¯¼è€…"]
    ];

    let shortIndex = 0;

    window.onload = function() {
        startShortTest();  // é¡µé¢åŠ è½½æ—¶å¼€å§‹çŸ­æ¿é—®å·
    };

    function startShortTest() {
        shortIndex = 0;
        document.getElementById("short-quiz").style.display = "block";
        loadShortQuestion();
    }

    function loadShortQuestion() {
        document.getElementById("short-question-text").innerText = 
shortQuestions[shortIndex];
        let newOptions = "";
        shortOptions[shortIndex].forEach((option, index) => {
            newOptions += `<button 
onclick="nextShortQuestion(${index})">${option}</button>`;
        });
        document.getElementById("short-options").innerHTML = newOptions;
    }

    function nextShortQuestion(choice) {
        shortAnswers.push(choice);
        if (shortIndex < shortQuestions.length - 1) {
            shortIndex++;
            loadShortQuestion();
        } else {
            calculateSoulType();
            document.getElementById("short-quiz").style.display = "none";
            document.getElementById("result").style.display = "block";
        }
    }

    function calculateSoulType() {
        let score = shortAnswers.reduce((a, b) => a + b, 0);
        if (score <= 2) {
            soulType = "æç«¯é­‚çˆ±çµ";
        } else if (score <= 4) {
            soulType = "ä¸­ç­‰é­‚çˆ±çµ";
        } else if (score <= 6) {
            soulType = "é­‚æ— æ„Ÿ";
        } else if (score <= 8) {
            soulType = "ä¸­ç­‰é­‚æ¨çµ";
        } else {
            soulType = "æç«¯é­‚æ¨çµ";
        }
        document.getElementById("result-text").innerText = 
`ä½ çš„çµé­‚ç»“æ„æ˜¯ï¼š${soulType} ğŸ˜Š`;
    }

    function startLongTest() {
        document.getElementById("result").style.display = "none";
        document.getElementById("long-test").style.display = "block";
        loadLongTest();
    }

    // é•¿æ¿é—®å·é¢˜ç›®ï¼ˆä»…åˆ—å‡º 10 é¢˜ï¼Œå¯æ·»åŠ è‡³ 30 é¢˜ï¼‰
const longQuestions = [
    "1. ä½ åœ¨å·¥ä½œä¸­æ›´å–œæ¬¢ï¼Ÿ",
    "2. ä½ å¦‚ä½•åšå†³å®šï¼Ÿ",
    "3. ä½ å¯¹æ–°äº‹ç‰©çš„æ¥å—åº¦å¦‚ä½•ï¼Ÿ",
    "4. ä½ å–œæ¬¢å•ç‹¬å·¥ä½œè¿˜æ˜¯å›¢é˜Ÿåˆä½œï¼Ÿ",
    "5. ä½ æ›´æ“…é•¿å¤„ç†æ•°æ®è¿˜æ˜¯äººä¸äººä¹‹é—´çš„å…³ç³»ï¼Ÿ",
    "6. ä½ å¯¹æœªæ¥çš„è§„åˆ’æ–¹å¼æ˜¯ï¼Ÿ",
    "7. ä½ è§‰å¾—è‡ªå·±å±äºé€»è¾‘åˆ†æå‹è¿˜æ˜¯åˆ›é€ å‹ï¼Ÿ",
    "8. ä½ æ˜¯å¦å®¹æ˜“å—ç¯å¢ƒå½±å“ï¼Ÿ",
    "9. ä½ å¦‚ä½•çœ‹å¾…è§„åˆ™ï¼Ÿ",
    "10. ä½ æ›´å–œæ¬¢å“ªç§å­¦ä¹ æ–¹å¼ï¼Ÿ",
    "11. ä½ åœ¨ç¤¾äº¤åœºåˆçš„è¡Œä¸ºå€¾å‘ï¼Ÿ",
    "12. ä½ æ›´å–œæ¬¢æŒ‰éƒ¨å°±ç­è¿˜æ˜¯éšé‡è€Œå®‰ï¼Ÿ",
    "13. ä½ åœ¨å‹åŠ›ä¸‹çš„è¡¨ç°ï¼Ÿ",
    "14. ä½ å–œæ¬¢æŒ‘æˆ˜è‡ªæˆ‘å—ï¼Ÿ",
    "15. ä½ å¯¹ç»†èŠ‚çš„å…³æ³¨åº¦å¦‚ä½•ï¼Ÿ",
    "16. ä½ æ›´å–œæ¬¢æœ‰æ˜ç¡®ç›®æ ‡çš„å·¥ä½œè¿˜æ˜¯è‡ªç”±å‘æŒ¥çš„å·¥ä½œï¼Ÿ",
    "17. ä½ æ˜¯å¦å®¹æ˜“å†²åŠ¨ï¼Ÿ",
    "18. ä½ æ›´å–œæ¬¢é¢†å¯¼å›¢é˜Ÿè¿˜æ˜¯æœä»é¢†å¯¼ï¼Ÿ",
    "19. ä½ å¯¹ç¨³å®šå·¥ä½œçš„æ€åº¦å¦‚ä½•ï¼Ÿ",
    "20. ä½ æ›´å–œæ¬¢å“ªç§æ€ç»´æ¨¡å¼ï¼Ÿ",
    "21. ä½ æ˜¯å¦å®¹æ˜“æ‹–å»¶ï¼Ÿ",
    "22. ä½ æ˜¯å¦ç»å¸¸è´¨ç–‘æƒå¨ï¼Ÿ",
    "23. ä½ å–œæ¬¢é€šè¿‡ç»éªŒè¿˜æ˜¯ç†è®ºå­¦ä¹ ï¼Ÿ",
    "24. ä½ è®¤ä¸ºè‡ªå·±æ˜¯å¤–å‘å‹è¿˜æ˜¯å†…å‘å‹ï¼Ÿ",
    "25. ä½ å¦‚ä½•å¤„ç†çŸ›ç›¾ï¼Ÿ",
    "26. ä½ è®¤ä¸ºè‡ªå·±çš„åˆ›é€ åŠ›å¦‚ä½•ï¼Ÿ",
    "27. ä½ æ˜¯å¦å–œæ¬¢å†’é™©ï¼Ÿ",
    "28. ä½ å¯¹é™Œç”Ÿäººçš„æ€åº¦å¦‚ä½•ï¼Ÿ",
    "29. ä½ æ›´å–œæ¬¢å“ªç§è¡¨è¾¾æ–¹å¼ï¼Ÿ",
    "30. ä½ å¦‚ä½•é¢å¯¹å¤±è´¥ï¼Ÿ"
];

const longOptions = [
    ["ğŸ’¼ å®è·µå·¥ä½œ", "ğŸ“š ç ”ç©¶å‹å·¥ä½œ"],
    ["ğŸ” ä¾é æ•°æ®", "ğŸ­ ä¾é ç›´è§‰"],
    ["ğŸš€ ç§¯æå°è¯•", "ğŸ¢ ä¿å®ˆæ¥å—"],
    ["ğŸ¤ å›¢é˜Ÿåˆä½œ", "ğŸ§‘â€ğŸ’» ç‹¬ç«‹å·¥ä½œ"],
    ["ğŸ“Š æ•°æ®åˆ†æ", "ğŸ¤ å…³ç³»ç®¡ç†"],
    ["ğŸ“… é•¿è¿œè§„åˆ’", "ğŸ”„ éšæœºåº”å˜"],
    ["ğŸ§  é€»è¾‘åˆ†æ", "ğŸ¨ åˆ›æ„å‘æ•£"],
    ["ğŸŒ¿ å®¹æ˜“å½±å“", "ğŸª¨ ä¸å—å½±å“"],
    ["ğŸ“œ ä¸¥æ ¼éµå®ˆ", "ğŸ­ é€‚å½“çµæ´»"],
    ["ğŸ“– ä¹¦æœ¬å­¦ä¹ ", "ğŸ›  å®è·µæ“ä½œ"],
    ["ğŸ‰ ä¸»åŠ¨äº¤é™…", "ğŸ§ è§‚å¯Ÿåˆ†æ"],
    ["ğŸ“Œ è®¡åˆ’è¡Œäº‹", "ğŸŒŠ çµæ´»åº”å˜"],
    ["âš¡ å¿«é€Ÿåº”å¯¹", "ğŸ§˜ å†·é™æ€è€ƒ"],
    ["ğŸš€ å–œæ¬¢æŒ‘æˆ˜", "ğŸ–ï¸ ä½é£é™©åå¥½"],
    ["ğŸ” å…³æ³¨ç»†èŠ‚", "ğŸŒ å¤§å±€æ€ç»´"],
    ["ğŸ¯ ç›®æ ‡é©±åŠ¨", "ğŸ•Šï¸ è‡ªç”±å‘æŒ¥"],
    ["ğŸ”¥ å†²åŠ¨è¡Œäº‹", "ğŸŒŠ å†·é™åˆ†æ"],
    ["ğŸ—£ï¸ é¢†å¯¼å›¢é˜Ÿ", "ğŸ“‹ æœä»æŒ‡ä»¤"],
    ["ğŸ”’ ç¨³å®šä¼˜å…ˆ", "ğŸš€ æœºä¼šä¼˜å…ˆ"],
    ["ğŸ“Š é€»è¾‘æ€ç»´", "ğŸ¨ ç›´è§‰æ„ŸçŸ¥"],
    ["â³ ç»å¸¸æ‹–å»¶", "âš¡ é«˜æ•ˆæ‰§è¡Œ"],
    ["â“ è´¨ç–‘æƒå¨", "âœ… æœä»è§„åˆ™"],
    ["ğŸ§ª ç»éªŒå­¦ä¹ ", "ğŸ“– ç†è®ºå­¦ä¹ "],
    ["ğŸ˜ƒ å¤–å‘ç¤¾äº¤", "ğŸ˜Œ å†…å‘æ€è€ƒ"],
    ["ğŸ¤ åå•†è§£å†³", "ğŸ¹ åšæŒç«‹åœº"],
    ["ğŸ¨ åˆ›æ„æ— é™", "ğŸ” é€»è¾‘æ¨ç†"],
    ["ğŸ¢ å–œæ¬¢å†’é™©", "ğŸ›¡ï¸ è§„é¿é£é™©"],
    ["ğŸ‘‹ å‹å¥½å¼€æ”¾", "ğŸ›‘ ä¿æŒè·ç¦»"],
    ["ğŸ“¢ ç›´æ¥è¡¨è¾¾", "ğŸ“ ä¹¦é¢è¡¨è¾¾"],
    ["ğŸ’ª ç§¯æé¢å¯¹", "ğŸ˜­ é€ƒé¿ç°å®"]
];

let longIndex = 0;

function loadLongTest() {
    if (longIndex < longQuestions.length) {
        document.getElementById("long-question-text").innerText = 
longQuestions[longIndex];
        document.getElementById("long-options").innerHTML = `
            <button 
onclick="nextLongQuestion(0)">${longOptions[longIndex][0]}</button>
            <button 
onclick="nextLongQuestion(1)">${longOptions[longIndex][1]}</button>
        `;
    } else {
        document.getElementById("long-options").innerHTML = "";
        document.querySelector("#long-test button").style.display = 
"block";
    }
}

function nextLongQuestion(choice) {
    longAnswers.push(choice);
    longIndex++;
    loadLongTest();
}
function finishLongTest() {
    // å‡è®¾ longAnswers æ•°ç»„å­˜å‚¨é•¿æ¿æµ‹è¯•ç»“æœ
    let mbtiType = determineMBTI(longAnswers);
    let bigFiveAnalysis = analyzeBigFive(longAnswers);
    let careerRecommendation = recommendCareer(mbtiType, bigFiveAnalysis);

    // å¡«å……é•¿æ¿æµ‹è¯•çš„ç»“æœ
    document.getElementById("mbti-result").innerText = `MBTI 
ç±»å‹ï¼š${mbtiType}`;
    document.getElementById("bigfive-result").innerText = `Big Five 
åˆ†æï¼š${bigFiveAnalysis}`;
    document.getElementById("career-recommendation").innerText = 
`èŒä¸šå»ºè®®ï¼š${careerRecommendation}`;

    // æ˜¾ç¤ºé•¿æ¿ç»“æœ
    document.getElementById("long-test-result").style.display = "block";
}    
function 
finishLongTest() 
{
        alert(`æµ‹è¯•å®Œæˆï¼ä½ çš„å®Œæ•´æŠ¥å‘Šå·²ç”Ÿæˆã€‚\nçµé­‚ç»“æ„ï¼š${soulType}`);
    }
     function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // ç¡®ä¿è·å–åˆ°çš„å…ƒç´ å­˜åœ¨ï¼Œå¦åˆ™æä¾›é»˜è®¤å€¼
    let userId = document.getElementById("user-id")?.innerText || 
"æœªå®šä¹‰ç”¨æˆ·";
    let testDate = document.getElementById("test-date")?.innerText || 
"æœªè®°å½•æ—¥æœŸ";
    let soulType = document.getElementById("soul-type")?.innerText || 
"æœªå®šä¹‰";
    let reportContent = 
document.getElementById("report-content")?.innerText || "æœªç”ŸæˆæŠ¥å‘Š";

    doc.setFont("helvetica");
    doc.text("ğŸ”® å‰ä¸–ä»Šç”Ÿå¤§æ­ç§˜", 20, 20);
    doc.text(`ç”¨æˆ· IDï¼š${userId}`, 20, 40);
    doc.text(`æµ‹è¯•æ—¥æœŸï¼š${testDate}`, 20, 50);
    doc.text(`çµé­‚ç»“æ„ï¼š${soulType}`, 20, 60);

    // è‡ªåŠ¨æ¢è¡Œçš„æŠ¥å‘Šå†…å®¹
    let splitContent = doc.splitTextToSize(reportContent, 180);
    doc.text(splitContent, 20, 80);

    doc.save("soul_report.pdf");
}
</script>

</body>
</html>

